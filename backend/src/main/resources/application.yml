spring:
  application:
    name: courseflow-backend
  
  data:
    mongodb:
      uri: ${MONGODB_URI:mongodb://localhost:27017/CourseFlow}
      database: CourseFlow
      # Explicitly set database name to ensure consistency
  
  profiles:
    active: ${SPRING_PROFILES_ACTIVE:dev}

server:
  port: ${SERVER_PORT:4000}
  servlet:
    context-path: /api

# JWT Configuration
jwt:
  secret: ${JWT_SECRET:your-256-bit-secret-key-change-this-in-production-minimum-32-characters}
  access-token-ttl: ${JWT_ACCESS_TOKEN_TTL:900000} # 15 minutes in milliseconds
  refresh-token-ttl: ${JWT_REFRESH_TOKEN_TTL:604800000} # 7 days in milliseconds

# CORS Configuration
cors:
  allowed-origins: ${CORS_ALLOWED_ORIGINS:http://localhost:5173,http://localhost:3000,http://localhost:8080,http://localhost:8081}
  allowed-methods: GET,POST,PUT,PATCH,DELETE,OPTIONS
  allowed-headers: "*"
  allow-credentials: true
  max-age: 3600

# SpringDoc OpenAPI Configuration
springdoc:
  api-docs:
    path: /v3/api-docs
  swagger-ui:
    path: /swagger-ui.html
    enabled: true
    tags-sorter: alpha
    operations-sorter: alpha

# Logging Configuration
logging:
  level:
    root: INFO
    com.courseflow: DEBUG
    org.springframework.security: DEBUG

---
# Development Profile
spring:
  config:
    activate:
      on-profile: dev
  
  data:
    mongodb:
      uri: ${MONGODB_URI:mongodb://localhost:27017/CourseFlow}
      database: CourseFlow
      # Explicitly set database name to ensure consistency

logging:
  level:
    com.courseflow: DEBUG

---
# Production Profile
spring:
  config:
    activate:
      on-profile: prod
  
  data:
    mongodb:
      uri: ${MONGODB_URI}

logging:
  level:
    root: WARN
    com.courseflow: INFO

